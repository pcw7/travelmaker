<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace xml의 이름 -->
<mapper namespace="reviewns">
	<select id="list" parameterType="integer" resultType="review">
		select * from review where bno=#{bno} order by rno
	</select>
	<select id="getMaxRno" resultType="integer">
		select nvl(max(rno),0) + 1 rno from review
	</select>
	<insert id="insert" parameterType="review">
		insert into review values (#{rno},#{reply_content},sysdate,sysdate,'n',0,#{bno})
	</insert>
	<insert id="insertPhoto" parameterType="reviewphoto">
		insert into reviewphoto values (reviewphoto_seq.nextval, 1, #{rno}, #{imgName})
	</insert>
	<update id="delete" parameterType="review">
		update review set del='y' where rno=#{rno}
	</update>
	<update id="update" parameterType="review">
		update review set reply_content=#{reply_content}, update_date=sysdate where rno=#{rno}
	</update>
</mapper>